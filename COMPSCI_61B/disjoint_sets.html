<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2026-02-23 Mon 14:19 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Disjoint Sets</title>
<meta name="generator" content="Org Mode" />
<link href="/pagefind/pagefind-ui.css" rel="stylesheet">
   <script src="/pagefind/pagefind-ui.js"></script>
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/default.min.css">
   <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/scheme.min.js"></script>
   <link rel="stylesheet" href="//unpkg.com/@catppuccin/highlightjs@1.0.1/css/catppuccin-frappe.css">
   <link rel="stylesheet" href="/style.css" type="text/css"/>
   <script>hljs.highlightAll();</script>

          <style>
          /* From: https://endlessparentheses.com/public/css/endless.css */
          /* See also: https://meta.superuser.com/questions/4788/css-for-the-new-kbd-style */
          kbd
          {
            -moz-border-radius: 6px;
            -moz-box-shadow: 0 1px 0 rgba(0,0,0,0.2),0 0 0 2px #fff inset;
            -webkit-border-radius: 6px;
            -webkit-box-shadow: 0 1px 0 rgba(0,0,0,0.2),0 0 0 2px #fff inset;
            background-color: #f7f7f7;
            border: 1px solid #ccc;
            border-radius: 6px;
            box-shadow: 0 1px 0 rgba(0,0,0,0.2),0 0 0 2px #fff inset;
            color: #333;
            display: inline-block;
            font-family: 'Droid Sans Mono', monospace;
            font-size: 80%;
            font-weight: normal;
            line-height: inherit;
            margin: 0 .1em;
            padding: .08em .4em;
            text-shadow: 0 1px 0 #fff;
            word-spacing: -4px;
        
            box-shadow: 2px 2px 2px #222; /* MA: An extra I've added. */
          }
          </style>
          <link rel="stylesheet" type="text/css" href="https://alhassy.github.io/org-special-block-extras/tooltipster/dist/css/tooltipster.bundle.min.css"/>
        
          <link rel="stylesheet" type="text/css" href="https://alhassy.github.io/org-special-block-extras/tooltipster/dist/css/plugins/tooltipster/sideTip/themes/tooltipster-sideTip-punk.min.css" />
        
          <script type="text/javascript">
              if (typeof jQuery == 'undefined') {
                  document.write(unescape('%3Cscript src="https://code.jquery.com/jquery-1.10.0.min.js"%3E%3C/script%3E'));
              }
          </script>
        
           <script type="text/javascript"            src="https://alhassy.github.io/org-special-block-extras/tooltipster/dist/js/tooltipster.bundle.min.js"></script>
        
            <script>
                   $(document).ready(function() {
                       $('.tooltip').tooltipster({
                           theme: 'tooltipster-punk',
                           contentAsHTML: true,
                           animation: 'grow',
                           delay: [100,500],
                           // trigger: 'click'
                           trigger: 'custom',
                           triggerOpen: {
                               mouseenter: true
                           },
                           triggerClose: {
                               originClick: true,
                               scroll: true
                           }
           });
                   });
               </script>
        
          <style>
             abbr {color: red;}
        
             .tooltip { border-bottom: 1px dotted #000;
                        color:red;
                        text-decoration: none;}
          </style>
<script>
  window.MathJax = {
    tex: {
      ams: {
        multlineWidth: '85%'
      },
      tags: 'ams',
      tagSide: 'right',
      tagIndent: '.8em'
    },
    chtml: {
      scale: 1.0,
      displayAlign: 'center',
      displayIndent: '0em'
    },
    svg: {
      scale: 1.0,
      displayAlign: 'center',
      displayIndent: '0em'
    },
    output: {
      font: 'mathjax-modern',
      displayOverflow: 'overflow'
    }
  };
</script>

<script
  id="MathJax-script"
  async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
</head>
<body>
<div id="preamble" class="status">
<div id="search"></div><div class="breadcrumb"><a href="/">Home</a> <span>â†’</span> <a href="/COMPSCI_61B/index.html">COMPSCI 61B</a></div>
</div>
<div id="content" class="content">
<h1 class="title">Disjoint Sets</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org73c8b98">1. Disjoint Sets</a>
<ul>
<li><a href="#orgc39f56f">1.1. Connected Components</a></li>
<li><a href="#orgcd40e8c">1.2. List of Sets</a></li>
<li><a href="#org6122990">1.3. Quick Find</a></li>
<li><a href="#org1c79d00">1.4. Quick Union</a></li>
<li><a href="#org2fac842">1.5. Weighted Quick Union</a></li>
<li><a href="#org3b5fbcd">1.6. Weighted Quick Union with Path Compression</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-org73c8b98" class="outline-2">
<h2 id="org73c8b98"><span class="section-number-2">1.</span> Disjoint Sets</h2>
<div class="outline-text-2" id="text-1">
<p>
The <b>disjoint sets</b> data structure has two operations:
</p>

<pre><code class="language-java"><span style="color: #cba6f7;">public</span> <span style="color: #cba6f7;">interface</span> <span style="color: #f9e2af;">DisjointSets</span> <span style="color: #f38ba8;">{</span>
    <span style="color: #6c7086;">/** Connects two items p and q. */</span>
    <span style="color: #f9e2af;">void</span> <span style="color: #89b4fa;">connect</span><span style="color: #fab387;">(</span><span style="color: #f9e2af;">int</span> <span style="color: #cdd6f4;">p</span>, <span style="color: #f9e2af;">int</span> <span style="color: #cdd6f4;">q</span><span style="color: #fab387;">)</span>;

    <span style="color: #6c7086;">/** Checks to see if two items are connected. */</span>
    <span style="color: #f9e2af;">boolean</span> <span style="color: #89b4fa;">isConnected</span><span style="color: #fab387;">(</span><span style="color: #f9e2af;">int</span> <span style="color: #cdd6f4;">p</span>, <span style="color: #f9e2af;">int</span> <span style="color: #cdd6f4;">q</span><span style="color: #fab387;">)</span>;
<span style="color: #f38ba8;">}</span>
</code></pre>

<p>
Connections can be <i>transitive</i>, which means that <code>x</code> and <code>y</code> do not have to be directly connected for them to be connected. We want to design an implementation that is efficient when the number of elements is large and the number of method calls is large.
</p>
</div>
<div id="outline-container-orgc39f56f" class="outline-3">
<h3 id="orgc39f56f"><span class="section-number-3">1.1.</span> Connected Components</h3>
<div class="outline-text-3" id="text-1-1">
<p>
The naive approach would be to track every connection, but it becomes very difficult to implement <code>isConnected</code>.
</p>

<p>
Rather than manually writing out every single connecting line, we only record the sets that each item belongs to. Every time we call <code>connect</code> on two elements, we move combine their respective sets so that they end up in the same set. Thus, when we call <code>isConnected</code>, we only need to check if they are in the same set.
</p>
</div>
</div>
<div id="outline-container-orgcd40e8c" class="outline-3">
<h3 id="orgcd40e8c"><span class="section-number-3">1.2.</span> List of Sets</h3>
<div class="outline-text-3" id="text-1-2">
<p>
Our first idea is to use a list of sets of integers, <code>List&lt;Set&lt;Integer&gt;&gt;</code>. However, operations on these take \(O(N)\) time because they need to first find the set that contains the element we want:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Implementation</th>
<th scope="col" class="org-left">Constructor</th>
<th scope="col" class="org-left"><code>connect</code></th>
<th scope="col" class="org-left"><code>isConnected</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>ListOfSetsDS</code></td>
<td class="org-left">\(\Theta(N)\)</td>
<td class="org-left">\(O(N)\)</td>
<td class="org-left">\(O(N)\)</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-org6122990" class="outline-3">
<h3 id="org6122990"><span class="section-number-3">1.3.</span> Quick Find</h3>
<div class="outline-text-3" id="text-1-3">
<p>
Our next idea is to use an array of integers where the ith entry gives the &ldquo;set number&rdquo; (or &ldquo;set id&rdquo;) of item i. In other words, instead of storing the sets themselves, we store an id. If two numbers have the same id, we know they are in the same set.
</p>

<p>
For example, instead of storing <code>{0, 1, 2, 4}, {3, 5}, {6}</code>, we can store:
</p>


<div id="org018c2c6" class="figure">
<p><img src="../static/COMPSCI_61B/disjoint_sets1.png" alt="disjoint_sets1.png" />
</p>
</div>

<p>
This allows us to check if two sets are connected in constant time, because we just need to access the array twice. However, connecting two sets still requires us to iterate over the array:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Implementation</th>
<th scope="col" class="org-left">Constructor</th>
<th scope="col" class="org-left"><code>connect</code></th>
<th scope="col" class="org-left"><code>isConnected</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>QuickFindDS</code></td>
<td class="org-left">\(\Theta(N)\)</td>
<td class="org-left">\(\Theta(N)\)</td>
<td class="org-left">\(\Theta(1)\)</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-org1c79d00" class="outline-3">
<h3 id="org1c79d00"><span class="section-number-3">1.4.</span> Quick Union</h3>
<div class="outline-text-3" id="text-1-4">
<p>
Our goal is to make <code>connect</code> fast by finding some method so that we don&rsquo;t have to look through the entire array. The idea is to assign each item a parent (instead of an id):
</p>


<div id="org8d58902" class="figure">
<p><img src="../static/COMPSCI_61B/disjoint_sets2.png" alt="disjoint_sets2.png" />
</p>
</div>

<p>
This allows us to represent the disjoint set as a number of trees:
</p>


<div id="org96e22f8" class="figure">
<p><img src="../static/COMPSCI_61B/disjoint_sets3.png" alt="disjoint_sets3.png" />
</p>
</div>

<p>
Now, say we want to do <code>connect(5, 2)</code>. To do so, we must find the root of the <code>5</code> tree (which is <code>3</code>), then change the parent of <code>3</code>:
</p>


<div id="org3fe4234" class="figure">
<p><img src="../static/COMPSCI_61B/disjoint_sets4.png" alt="disjoint_sets4.png" />
</p>
</div>

<p>
However, while this makes connecting potentially faster, it also makes <code>isConnected</code> slower in some circumstances as we have to traverse an entire branch of a tree:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Implementation</th>
<th scope="col" class="org-left">Constructor</th>
<th scope="col" class="org-left"><code>connect</code></th>
<th scope="col" class="org-left"><code>isConnected</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>QuickUnionDS</code></td>
<td class="org-left">\(\Theta(N)\)</td>
<td class="org-left">\(O(N)\)</td>
<td class="org-left">\(O(N)\)</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-org2fac842" class="outline-3">
<h3 id="org2fac842"><span class="section-number-3">1.5.</span> Weighted Quick Union</h3>
<div class="outline-text-3" id="text-1-5">
<p>
We observe that things would be faster if we just kept the trees in <code>QuickUnionDS</code> balanced. In other words, we want to set the parents so that we minimize the height of our tree. Realize that we can always <i>link the root of the smaller tree to the larger tree</i>:
</p>


<div id="orgf666fb9" class="figure">
<p><img src="../static/COMPSCI_61B/disjoint_sets5.png" alt="disjoint_sets5.png" />
</p>
</div>


<p>
Considering the worst case where the tree height grows as fast as possible, we see that the height growths logarithmically with respect to the number of elements. Thus, our performance becomes:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Implementation</th>
<th scope="col" class="org-left">Constructor</th>
<th scope="col" class="org-left"><code>connect</code></th>
<th scope="col" class="org-left"><code>isConnected</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>WeightedQuickUnionDS</code></td>
<td class="org-left">\(\Theta(N)\)</td>
<td class="org-left">\(O(\log N)\)</td>
<td class="org-left">\(O(\log N)\)</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-org3b5fbcd" class="outline-3">
<h3 id="org3b5fbcd"><span class="section-number-3">1.6.</span> Weighted Quick Union with Path Compression</h3>
<div class="outline-text-3" id="text-1-6">
<p>
<code>WeightedQuickUnion</code> is fast enough for all practical purposes, but could we do better? Consider calling <code>isConnected(15, 10)</code> on the following tree:
</p>


<div id="org1d74d11" class="figure">
<p><img src="../static/COMPSCI_61B/disjoint_sets6.png" alt="disjoint_sets6.png" />
</p>
</div>

<p>
The cells highlighted in blue are the elements that we have seen. The idea is that we can <i>compress</i> the tree height by replacing all the blue nodes&rsquo; parent to the root:
</p>


<div id="org6be1316" class="figure">
<p><img src="../static/COMPSCI_61B/disjoint_sets7.png" alt="disjoint_sets7.png" />
</p>
</div>

<p>
By compressing the tree like this with each <code>isConnected</code> call, we can keep the tree nice and short. As the number of elements grows, our tree gets taller, but as the number of operations grows, our tree tends to get shorter. In fact, it can be shown that its runtime grows with respect to \(\alpha(N)\), where \(\alpha\) is the <a href="https://en.wikipedia.org/wiki/Ackermann_function#Inverse">inverse Ackermann function</a>.
</p>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<div class="footer">
               <p>Author: Lin Jiang</p>
               
             </div>
             <div class="last-modified">
               Last modified: 2026-02-23 14:19
             </div><script>
     window.addEventListener('DOMContentLoaded', (event) => {
         new PagefindUI({
            element: '#search',
            showSubResults: true,
            bundlePath: '/pagefind/'
         });
     });
    </script>
</div>
</body>
</html>
